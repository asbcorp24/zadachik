<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Self-Supervised Learning ¬´–¥–ª—è –¥—É—Ä–∞—á–∫–æ–≤¬ª</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 20px auto;
      padding: 0 15px;
      line-height: 1.4;
    }
    h1, h2 { text-align: center; }
    section {
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 15px;
      margin-bottom: 30px;
    }
    canvas {
      display: block;
      margin: 10px auto;
      border: 1px solid #888;
      background: #fff;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0;
    }
    th, td {
      border: 1px solid #888;
      padding: 6px 8px;
      text-align: center;
    }
    th { background: #eee; }
    .controls {
      text-align: center;
      margin: 15px 0;
    }
    .controls button {
      margin: 0 6px;
      padding: 6px 12px;
      font-size: 1rem;
    }
    #logImg, #logText {
      background: #f5f5f5;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 10px;
      font-family: monospace;
      white-space: pre-line;
      max-height: 200px;
      overflow-y: auto;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <h1>Self-Supervised Learning</h1>
  <p style="text-align:center;">–ò–ò —Å–∞–º –ø—Ä–∏–¥—É–º—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∫–∏ –ø–æ —Ç–µ–∫—Å—Ç—É –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º –∏ —É—á–∏—Ç—Å—è –∏—Ö —Ä–µ—à–∞—Ç—å üß†üéØü§î</p>

  <!-- Image SSL -->
  <section>
    <h2>1. Image Inpainting (–¥–æ–ø–æ–ª–Ω–∏ –∫–∞—Ä—Ç–∏–Ω–∫—É)</h2>
    <canvas id="imgCanvas" width="300" height="300"></canvas>
    <div class="controls">
      <button id="maskBtn">–®–∞–≥ 1: –ó–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç</button>
      <button id="reconBtn" disabled>–®–∞–≥ 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
      <button id="resetImgBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
    </div>
    <div id="logImg">
      –ñ—É—Ä–Ω–∞–ª Image SSL: –Ω–∞–∂–º–∏—Ç–µ ¬´–®–∞–≥ 1: –ó–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç¬ª.
    </div>
  </section>

  <!-- Text SSL -->
  <section>
    <h2>2. Masked Word Prediction (—É–≥–∞–¥–∞–π —Å–ª–æ–≤–æ)</h2>
    <table>
      <tr><th>–ò–Ω–¥–µ–∫—Å</th><th>–°–ª–æ–≤–æ</th></tr>
      <tr><td>0</td><td id="w0">I</td></tr>
      <tr><td>1</td><td id="w1">love</td></tr>
      <tr><td>2</td><td id="w2">apples</td></tr>
      <tr><td>3</td><td id="w3">and</td></tr>
      <tr><td>4</td><td id="w4">bananas</td></tr>
    </table>
    <div class="controls">
      <button id="maskTextBtn">–®–∞–≥ 1: –ó–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–≤–æ</button>
      <button id="predictBtn" disabled>–®–∞–≥ 2: –ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å</button>
      <button id="resetTextBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
    </div>
    <div id="logText">
      –ñ—É—Ä–Ω–∞–ª Text SSL: –Ω–∞–∂–º–∏—Ç–µ ¬´–®–∞–≥ 1: –ó–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–≤–æ¬ª.
    </div>
  </section>

  <script>
  // ===== Image SSL =====
  const imgCanvas = document.getElementById('imgCanvas'),
        ctxImg     = imgCanvas.getContext('2d'),
        logImg     = document.getElementById('logImg');
  let masked = false, maskRegion = null;
  // –ù–∞—Ä–∏—Å—É–µ–º –∏—Å—Ö–æ–¥–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É (—Å–º–∞–π–ª–∏–∫)
  function drawBase() {
    ctxImg.clearRect(0,0,300,300);
    // —Ñ–æ–Ω
    ctxImg.fillStyle = '#ffe0bd';
    ctxImg.fillRect(0,0,300,300);
    // –≥–ª–∞–∑–∞
    ctxImg.fillStyle = '#000';
    ctxImg.beginPath(); ctxImg.arc(100,120,10,0,2*Math.PI); ctxImg.fill();
    ctxImg.beginPath(); ctxImg.arc(200,120,10,0,2*Math.PI); ctxImg.fill();
    // —Ä–æ—Ç
    ctxImg.strokeStyle = '#c33';
    ctxImg.lineWidth = 5;
    ctxImg.beginPath();
    ctxImg.arc(150,180,40,0,Math.PI); ctxImg.stroke();
  }
  drawBase();
  function logI(msg) {
    logImg.textContent = msg + '\n\n' + logImg.textContent;
  }

  document.getElementById('maskBtn').onclick = () => {
    // –∑–∞–¥–∞—ë–º –æ–±–ª–∞—Å—Ç—å (–ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ 100√ó100 –≤ —Ü–µ–Ω—Ç—Ä–µ)
    maskRegion = { x:100, y:100, w:100, h:100 };
    // –≤—ã—Ä–µ–∑–∞–µ–º –∏ –∑–∞–ª–∏–≤–∞–µ–º —Å–µ—Ä—ã–º
    ctxImg.fillStyle = '#888';
    ctxImg.fillRect(maskRegion.x, maskRegion.y, maskRegion.w, maskRegion.h);
    drawBase(); // —É–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∑–∞–ª–∏–≤–∫–∞ –ø–æ–≤–µ—Ä—Ö
    logI(
      `–®–∞–≥ 1: –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞.\n`+
      `–†–µ–≥–∏–æ–Ω: x=${maskRegion.x}, y=${maskRegion.y}, `+
      `w=${maskRegion.w}, h=${maskRegion.h}\n`+
      `–ü–æ–∫—Ä—ã–ª–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Å–µ—Ä—ã–º —Ü–≤–µ—Ç–æ–º.`
    );
    masked = true;
    document.getElementById('reconBtn').disabled = false;
  };

  document.getElementById('reconBtn').onclick = () => {
    if(!masked) return;
    // –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª —Ç–æ–ª—å–∫–æ –≤ —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç–∏
    const imgData = ctxImg.getImageData(maskRegion.x, maskRegion.y, maskRegion.w, maskRegion.h);
    // –¥–ª—è –¥–µ–º–æ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Ä–∏—Å—É–µ–º –±–∞–∑—É —Ü–µ–ª–∏–∫–æ–º
    drawBase();
    logI(
      `–®–∞–≥ 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ.\n`+
      `–°–Ω–æ–≤–∞ –Ω–∞—Ä–∏—Å–æ–≤–∞–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–π —Å–º–∞–π–ª–∏–∫ –∑–∞ –æ–¥–∏–Ω —à–∞–≥ (–∏–º–∏—Ç–∞—Ü–∏—è inpainting).`
    );
  };

  document.getElementById('resetImgBtn').onclick = () => {
    drawBase();
    logImg.textContent = '–ñ—É—Ä–Ω–∞–ª Image SSL: –Ω–∞–∂–º–∏—Ç–µ ¬´–®–∞–≥ 1: –ó–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç¬ª.';
    document.getElementById('reconBtn').disabled = true;
    masked = false;
  };


  // ===== Text SSL =====
  const words = ['I','love','apples','and','bananas'];
  const origWords = words.slice();
  const logText = document.getElementById('logText');
  let maskedIndex = null;

  function updateTable() {
    for(let i=0;i<5;i++){
      document.getElementById('w'+i).textContent = words[i];
    }
  }
  function logT(msg) {
    logText.textContent = msg + '\n\n' + logText.textContent;
  }

  document.getElementById('maskTextBtn').onclick = () => {
    maskedIndex = 2; // –≤—Å–µ–≥–¥–∞ –º–∞—Å–∫–∏—Ä—É–µ–º –∏–Ω–¥–µ–∫—Å 2
    words[maskedIndex] = '____';
    updateTable();
    logT(
      `–®–∞–≥ 1: –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ —Å–ª–æ–≤–∞.\n`+
      `–ò–Ω–¥–µ–∫—Å = ${maskedIndex}\n`+
      `–ó–∞–º–µ–Ω–∏–ª–∏ —Å–ª–æ–≤–æ ¬´${origWords[maskedIndex]}¬ª –Ω–∞ ¬´____¬ª.`
    );
    document.getElementById('predictBtn').disabled = false;
  };

  document.getElementById('predictBtn').onclick = () => {
    // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è: –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º origWords[2]
    const guess = origWords[maskedIndex];
    words[maskedIndex] = guess;
    updateTable();
    // –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π "—Ä–∞—Å—á—ë—Ç" —Å—Ö–æ–∂–µ—Å—Ç–∏
    const sim = 0.97; // —Ñ–∏–∫—Ç–∏–≤–Ω–∞—è –ø–æ—Ö–æ–∂–µ—Å—Ç—å
    logT(
      `–®–∞–≥ 2: –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å–ª–æ–≤–∞.\n`+
      `–°—Ä–∞–≤–Ω–∏–ª–∏ embedding –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞ –∏–∑ vocab —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:\n`+
      `  sim('apples') = ${sim.toFixed(2)} ‚Äî –Ω–∞–∏–±–æ–ª—å—à–∏–π \n`+
      `–ü–æ—ç—Ç–æ–º—É —Å–ª–æ–≤–æ = ¬´${guess}¬ª.`
    );
  };

  document.getElementById('resetTextBtn').onclick = () => {
    for(let i=0;i<5;i++) words[i] = origWords[i];
    updateTable();
    logText.textContent = '–ñ—É—Ä–Ω–∞–ª Text SSL: –Ω–∞–∂–º–∏—Ç–µ ¬´–®–∞–≥ 1: –ú–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–≤–æ¬ª.';
    document.getElementById('predictBtn').disabled = true;
    maskedIndex = null;
  };

  // –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  updateTable();
  document.getElementById('predictBtn').disabled = true;
  </script>

</body>
</html>
