<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Data Augmentation ¬´–¥–ª—è –¥—É—Ä–∞—á–∫–æ–≤¬ª</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 20px auto;
      padding: 0 15px;
      line-height: 1.4;
    }
    h1, h2 { text-align: center; }
    canvas {
      display: block;
      margin: 0 auto 10px;
      background: #fff;
      border: 1px solid #ccc;
    }
    .controls {
      text-align: center;
      margin: 10px 0 20px;
    }
    .controls button {
      margin: 4px;
      padding: 6px 12px;
      font-size: 1rem;
    }
    #logImage, #logText {
      background: #f5f5f5;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-family: monospace;
      white-space: pre-line;
      max-height: 200px;
      overflow-y: auto;
      margin-bottom: 30px;
    }
    textarea {
      width: 100%;
      height: 80px;
      font-size: 1rem;
      padding: 6px;
    }
  </style>
</head>
<body>

  <h1>Data Augmentation ¬´–¥–ª—è –¥—É—Ä–∞—á–∫–æ–≤¬ª</h1>

  <!-- Image Augmentation -->
  <section>
    <h2>–ê—É–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π üë©‚Äçü¶∞üß¢üåûüåë</h2>
    <canvas id="imgCanvas" width="300" height="300"></canvas>
    <div class="controls">
      <button id="rotateBtn">–ü–æ–≤–µ—Ä–Ω—É—Ç—å +15¬∞</button>
      <button id="flipXBtn">–ó–µ—Ä–∫–∞–ª—å–Ω–æ X</button>
      <button id="flipYBtn">–ó–µ—Ä–∫–∞–ª—å–Ω–æ Y</button>
      <button id="cropBtn">–û–±—Ä–µ–∑–∞—Ç—å —Ü–µ–Ω—Ç—Ä</button>
      <button id="brightenBtn">–Ø—Ä–∫–æ—Å—Ç—å +20%</button>
      <button id="noiseBtn">–î–æ–±–∞–≤–∏—Ç—å —à—É–º</button>
      <button id="resetImgBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
    </div>
    <div id="logImage">–ñ—É—Ä–Ω–∞–ª: –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ª—é–±—É—é –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏—é.</div>
  </section>

  <!-- Text Augmentation -->
  <section>
    <h2>–ê—É–≥–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ üìùüîÄüí¨</h2>
    <textarea id="textInput">–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –∫–≤–∞—Ä—Ç–∏—Ä–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ –≥–æ—Ä–æ–¥–∞?</textarea>
    <div class="controls">
      <button id="synonymBtn">–°–∏–Ω–æ–Ω–∏–º—ã</button>
      <button id="deleteWordBtn">–£–¥–∞–ª–∏—Ç—å —Å–ª–æ–≤–æ</button>
      <button id="shuffleBtn">–ü–µ—Ä–µ—Å—Ç–∞–≤–∏—Ç—å —Å–ª–æ–≤–∞</button>
      <button id="textNoiseBtn">–î–æ–±–∞–≤–∏—Ç—å —à—É–º</button>
      <button id="resetTextBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
    </div>
    <div id="logText">–ñ—É—Ä–Ω–∞–ª: –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ª—é–±—É—é –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞.</div>
  </section>

  <script>
  // ===== Image Augmentation =====
  const canvas = document.getElementById('imgCanvas'),
        ctx = canvas.getContext('2d'),
        logImage = document.getElementById('logImage');
  let baseImage = new Image(), angle=0, scaleX=1, scaleY=1;
  // –†–∏—Å—É–µ–º –ø—Ä–æ—Å—Ç—É—é ¬´–≥–æ–ª–æ–≤—É¬ª –Ω–∞ baseImage —á–µ—Ä–µ–∑ canvas
  function drawBaseImage() {
    const off = document.createElement('canvas');
    off.width = 300; off.height = 300;
    const cx = off.getContext('2d');
    // —Ñ–æ–Ω
    cx.fillStyle = '#ffe0bd';
    cx.fillRect(0,0,300,300);
    // –≥–ª–∞–∑–∞
    cx.fillStyle = '#000';
    cx.beginPath(); cx.arc(100,120,10,0,2*Math.PI); cx.fill();
    cx.beginPath(); cx.arc(200,120,10,0,2*Math.PI); cx.fill();
    // —Ä–æ—Ç
    cx.strokeStyle = '#c33';
    cx.lineWidth = 5;
    cx.beginPath();
    cx.arc(150,180,40,0,Math.PI);
    cx.stroke();
    baseImage.src = off.toDataURL();
  }
  // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∞—Ç—å —Å —É—á–µ—Ç–æ–º —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π
  function redrawImage() {
    ctx.clearRect(0,0,300,300);
    ctx.save();
    ctx.translate(150,150);
    ctx.rotate(angle*Math.PI/180);
    ctx.scale(scaleX,scaleY);
    ctx.drawImage(baseImage, -150, -150, 300, 300);
    ctx.restore();
  }
  baseImage.onload = redrawImage;
  drawBaseImage();

  function log(msg) {
    logImage.textContent = msg + '\n\n' + logImage.textContent;
  }

  document.getElementById('rotateBtn').onclick = () => {
    angle = (angle + 15) % 360;
    redrawImage();
    log(`–ü–æ–≤–æ—Ä–æ—Ç: —É–≥–æ–ª = ${angle}¬∞`);
  };
  document.getElementById('flipXBtn').onclick = () => {
    scaleX = -scaleX;
    redrawImage();
    log(`–ó–µ—Ä–∫–∞–ª—å–Ω–æ –ø–æ X: scaleX = ${scaleX}`);
  };
  document.getElementById('flipYBtn').onclick = () => {
    scaleY = -scaleY;
    redrawImage();
    log(`–ó–µ—Ä–∫–∞–ª—å–Ω–æ –ø–æ Y: scaleY = ${scaleY}`);
  };
  document.getElementById('cropBtn').onclick = () => {
    // –û–±—Ä–µ–∑–∞–µ–º —Ü–µ–Ω—Ç—Ä 150√ó150 –∏ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å –∫–∞–Ω–≤–∞—Å
    const imgData = ctx.getImageData(75,75,150,150);
    ctx.clearRect(0,0,300,300);
    ctx.putImageData(imgData,75,75);
    log(`–û–±—Ä–µ–∑–∫–∞: –≤–∑—è–ª–∏ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π 150√ó150 —Ñ—Ä–∞–≥–º–µ–Ω—Ç`);
  };
  document.getElementById('brightenBtn').onclick = () => {
    const img = ctx.getImageData(0,0,300,300);
    for(let i=0;i<img.data.length;i+=4){
      img.data[i]   = Math.min(255, img.data[i]*1.2);
      img.data[i+1] = Math.min(255, img.data[i+1]*1.2);
      img.data[i+2] = Math.min(255, img.data[i+2]*1.2);
    }
    ctx.putImageData(img,0,0);
    log(`–Ø—Ä–∫–æ—Å—Ç—å: R/G/B √ó1.2`);
  };
  document.getElementById('noiseBtn').onclick = () => {
    const img = ctx.getImageData(0,0,300,300);
    const count = 500;
    for(let i=0;i<count;i++){
      const x = Math.floor(Math.random()*300),
            y = Math.floor(Math.random()*300),
            idx = (y*300 + x)*4;
      img.data[idx] = img.data[idx+1] = img.data[idx+2] = 255 * Math.random();
    }
    ctx.putImageData(img,0,0);
    log(`–®—É–º: –¥–æ–±–∞–≤–∏–ª–∏ ${count} —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–∏–∫—Å–µ–ª–µ–π`);
  };
  document.getElementById('resetImgBtn').onclick = () => {
    angle=0; scaleX=1; scaleY=1;
    drawBaseImage();
    logImage.textContent = '–ñ—É—Ä–Ω–∞–ª: –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ª—é–±—É—é –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏—é.';
  };

  // ===== Text Augmentation =====
  const textarea = document.getElementById('textInput'),
        logText = document.getElementById('logText'),
        originalText = textarea.value;

  const synonyms = {
    "–°–∫–æ–ª—å–∫–æ": "–ö–∞–∫–æ–≤–∞",
    "—Å—Ç–æ–∏—Ç": "—Ü–µ–Ω–∞",
    "–∫–≤–∞—Ä—Ç–∏—Ä–∞": "–∂–∏–ª—å—ë",
    "—Ü–µ–Ω—Ç—Ä–µ": "—è–¥—Ä–µ",
    "–≥–æ—Ä–æ–¥–∞": "–≥–æ—Ä–æ–¥–∞"
  };

  function logT(msg) {
    logText.textContent = msg + '\n\n' + logText.textContent;
  }

  document.getElementById('synonymBtn').onclick = () => {
    let words = textarea.value.split(' ');
    let used = [];
    words = words.map(w => {
      const w0 = w.replace(/[.,!?]/,'');
      if(synonyms[w0]){
        used.push(`${w0}‚Üí${synonyms[w0]}`);
        return w.replace(w0, synonyms[w0]);
      }
      return w;
    });
    textarea.value = words.join(' ');
    logT(`–°–∏–Ω–æ–Ω–∏–º—ã: –∑–∞–º–µ–Ω–∏–ª–∏ ${used.join(', ')}`);
  };

  document.getElementById('deleteWordBtn').onclick = () => {
    let words = textarea.value.split(' ');
    if(words.length<=1) return;
    const idx = Math.floor(Math.random()*words.length);
    const removed = words.splice(idx,1);
    textarea.value = words.join(' ');
    logT(`–£–¥–∞–ª–∏–ª–∏ —Å–ª–æ–≤–æ "${removed[0]}" (–∏–Ω–¥–µ–∫—Å ${idx})`);
  };

  document.getElementById('shuffleBtn').onclick = () => {
    let words = textarea.value.split(' ');
    for(let i=words.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [words[i],words[j]] = [words[j],words[i]];
    }
    textarea.value = words.join(' ');
    logT(`–ü–µ—Ä–µ—Å—Ç–∞–≤–∏–ª–∏ —Å–ª–æ–≤–∞ —Å–ª—É—á–∞–π–Ω–æ`);
  };

  document.getElementById('textNoiseBtn').onclick = () => {
    let txt = textarea.value;
    if(txt.length<1) return;
    const pos = Math.floor(Math.random()*txt.length);
    const char = String.fromCharCode(1072 + Math.floor(Math.random()*32));
    textarea.value = txt.slice(0,pos) + char + txt.slice(pos);
    logT(`–î–æ–±–∞–≤–∏–ª–∏ —à—É–º: –≤—Å—Ç–∞–≤–∏–ª–∏ "${char}" –≤ –ø–æ–∑–∏—Ü–∏—é ${pos}`);
  };

  document.getElementById('resetTextBtn').onclick = () => {
    textarea.value = originalText;
    logText.textContent = '–ñ—É—Ä–Ω–∞–ª: –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ª—é–±—É—é –∞—É–≥–º–µ–Ω—Ç–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞.';
  };
  </script>

</body>
</html>
