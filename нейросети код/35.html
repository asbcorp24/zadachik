<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–µ—Ç—Ä–∏–∫–∏ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ ¬´–¥–ª—è –¥—É—Ä–∞—á–∫–æ–≤¬ª</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 20px auto;
      padding: 0 15px;
      line-height: 1.5;
    }
    h1, h2 { text-align: center; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      margin-bottom: 20px;
    }
    th, td {
      border: 1px solid #888;
      padding: 6px 8px;
      text-align: center;
    }
    th { background: #eee; }
    .controls {
      text-align: center;
      margin: 15px 0;
    }
    .controls button {
      margin: 0 8px;
      padding: 6px 14px;
      font-size: 1rem;
    }
    #log {
      background: #f5f5f5;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 10px;
      font-family: monospace;
      white-space: pre-line;
      max-height: 300px;
      overflow-y: auto;
    }
  </style>
</head>
<body>

  <h1>–ú–µ—Ç—Ä–∏–∫–∏ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏</h1>
  <p style="text-align:center;">üçâ‚öñÔ∏è‚ùì ‚Äî –Ω–∞—Å–∫–æ–ª—å–∫–æ —Å–∏–ª—å–Ω–æ —Ç—ã –ø—Ä–æ–º–∞—Ö–Ω—É–ª—Å—è?</p>

  <h2>1. –í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ</h2>
  <table>
    <tr><th>#</th><th>–ò—Å—Ç–∏–Ω–Ω–æ–µ y<sub>i</sub></th><th>–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω–æ–µ ≈∑<sub>i</sub></th><th>–û—à–∏–±–∫–∞ e<sub>i</sub>=≈∑‚àíy</th><th>e<sub>i</sub>¬≤</th><th>|e<sub>i</sub>|</th></tr>
    <!-- 4 –ø—Ä–∏–º–µ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
    <tr><td>1</td><td><input id="y0" type="number" value="5" step="0.1"></td><td><input id="p0" type="number" value="6" step="0.1"></td><td id="e0">‚Äì</td><td id="sq0">‚Äì</td><td id="abs0">‚Äì</td></tr>
    <tr><td>2</td><td><input id="y1" type="number" value="3" step="0.1"></td><td><input id="p1" type="number" value="2" step="0.1"></td><td id="e1">‚Äì</td><td id="sq1">‚Äì</td><td id="abs1">‚Äì</td></tr>
    <tr><td>3</td><td><input id="y2" type="number" value="8" step="0.1"></td><td><input id="p2" type="number" value="7" step="0.1"></td><td id="e2">‚Äì</td><td id="sq2">‚Äì</td><td id="abs2">‚Äì</td></tr>
    <tr><td>4</td><td><input id="y3" type="number" value="2" step="0.1"></td><td><input id="p3" type="number" value="4" step="0.1"></td><td id="e3">‚Äì</td><td id="sq3">‚Äì</td><td id="abs3">‚Äì</td></tr>
  </table>

  <div class="controls">
    <button id="compute">–í—ã—á–∏—Å–ª–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏</button>
    <button id="reset">–°–±—Ä–æ—Å–∏—Ç—å</button>
  </div>

  <h2>2. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–∞—Å—á—ë—Ç—ã</h2>
  <div id="log">
    –ñ—É—Ä–Ω–∞–ª —Ä–∞—Å—á—ë—Ç–æ–≤: –Ω–∞–∂–º–∏—Ç–µ ¬´–í—ã—á–∏—Å–ª–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏¬ª, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤—Å–µ —à–∞–≥–∏.
  </div>

  <script>
    const N = 4;  // —á–∏—Å–ª–æ –ø—Ä–∏–º–µ—Ä–æ–≤
    const logEl = document.getElementById('log');
    const inputsY = [], inputsP = [];
    const cellsE = [], cellsSQ = [], cellsABS = [];
    for(let i=0;i<N;i++){
      inputsY.push(document.getElementById('y'+i));
      inputsP.push(document.getElementById('p'+i));
      cellsE.push(document.getElementById('e'+i));
      cellsSQ.push(document.getElementById('sq'+i));
      cellsABS.push(document.getElementById('abs'+i));
    }
    document.getElementById('reset').onclick = () => {
      // —Å–±—Ä–æ—Å–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∏ –æ—á–∏—Å—Ç–∏—Ç—å —è—á–µ–π–∫–∏
      const defaultsY = [5,3,8,2], defaultsP = [6,2,7,4];
      for(let i=0;i<N;i++){
        inputsY[i].value = defaultsY[i];
        inputsP[i].value = defaultsP[i];
        cellsE[i].textContent = '‚Äì';
        cellsSQ[i].textContent = '‚Äì';
        cellsABS[i].textContent = '‚Äì';
      }
      logEl.textContent = '–ñ—É—Ä–Ω–∞–ª —Ä–∞—Å—á—ë—Ç–æ–≤: –Ω–∞–∂–º–∏—Ç–µ ¬´–í—ã—á–∏—Å–ª–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏¬ª.';
    };
    document.getElementById('compute').onclick = () => {
      const y = [], p = [];
      for(let i=0;i<N;i++){
        y[i] = parseFloat(inputsY[i].value);
        p[i] = parseFloat(inputsP[i].value);
      }
      // –®–∞–≥ 1: –æ—à–∏–±–∫–∏, –∫–≤–∞–¥—Ä–∞—Ç—ã, –º–æ–¥—É–ª–∏
      let log = '–®–∞–≥ 1: –ø–æ –∫–∞–∂–¥–æ–º—É –ø—Ä–∏–º–µ—Ä—É —Å—á–∏—Ç–∞–µ–º e·µ¢, e·µ¢¬≤, |e·µ¢|:\n\n';
      const errors = [], sq = [], absErr = [];
      for(let i=0;i<N;i++){
        const e = p[i] - y[i];
        const s = e*e;
        const a = Math.abs(e);
        errors[i] = e; sq[i] = s; absErr[i] = a;
        cellsE[i].textContent = e.toFixed(2);
        cellsSQ[i].textContent = s.toFixed(2);
        cellsABS[i].textContent = a.toFixed(2);
        log += `  –ü—Ä–∏–º–µ—Ä ${i+1}: ≈∑=${p[i]}, y=${y[i]} ‚Üí e=${p[i]}‚àí${y[i]}=${e.toFixed(2)}, `+
               `e¬≤=${s.toFixed(2)}, |e|=${a.toFixed(2)}\n`;
      }
      // –®–∞–≥ 2: MSE
      const sumSq = sq.reduce((a,b)=>a+b,0);
      const mse = sumSq / N;
      log += `\n–®–∞–≥ 2: MSE = (‚àëe·µ¢¬≤)/N = (${sq.map(x=>x.toFixed(2)).join('+')})/${N} = `+
             `${sumSq.toFixed(2)}/${N} = ${mse.toFixed(4)}\n`;

      // –®–∞–≥ 3: MAE
      const sumAbs = absErr.reduce((a,b)=>a+b,0);
      const mae = sumAbs / N;
      log += `\n–®–∞–≥ 3: MAE = (‚àë|e·µ¢|)/N = (${absErr.map(x=>x.toFixed(2)).join('+')})/${N} = `+
             `${sumAbs.toFixed(2)}/${N} = ${mae.toFixed(4)}\n`;

      // –®–∞–≥ 4: R¬≤
      const meanY = y.reduce((a,b)=>a+b,0)/N;
      const totSq = y.reduce((a,yi)=>a + Math.pow(yi - meanY,2),0);
      const r2 = 1 - (sumSq / totSq);
      log += `\n–®–∞–≥ 4: R¬≤ = 1 ‚àí (‚àëe·µ¢¬≤)/(‚àë(y·µ¢‚àí»≥)¬≤)\n`+
             `  –°—Ä–µ–¥–Ω–µ–µ »≥ = (${y.join('+')})/${N} = ${meanY.toFixed(2)}\n`+
             `  ‚àë(y·µ¢‚àí»≥)¬≤ = ${y.map(yi=>`(${yi.toFixed(2)}‚àí${meanY.toFixed(2)})¬≤`).join('+')} = ${totSq.toFixed(2)}\n`+
             `  R¬≤ = 1 ‚àí ${sumSq.toFixed(2)}/${totSq.toFixed(2)} = ${r2.toFixed(4)}\n`;

      logEl.textContent = log;
    };

  </script>
</body>
</html>
