<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–î–µ–º–æ —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π ¬´–¥–ª—è –¥—É—Ä–∞—á–∫–æ–≤¬ª</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 30px auto;
      line-height: 1.5;
      padding: 0 15px;
    }
    h1 { text-align: center; margin-bottom: 30px; }
    section { background: #f9f9f9; padding: 15px; border-radius: 6px; margin-bottom: 20px; }
    h2 { margin-top: 0; }
    .row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
    .row label { font-size: 0.95rem; }
    .row input, .row select, .row button { font-size: 1rem; padding: 4px 8px; }
    table { border-collapse: collapse; margin-top: 10px; }
    table, td, th { border: 1px solid #aaa; }
    td, th { padding: 6px 10px; text-align: center; }
    #info-dropout, #info-bn, #info-reg { background: #fff; padding: 10px; margin-top: 10px; border-radius: 4px; font-family: monospace; white-space: pre-line; }
  </style>
</head>
<body>

  <h1>–†–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π ¬´–¥–ª—è –¥—É—Ä–∞—á–∫–æ–≤¬ª</h1>

  <section id="dropout-section">
    <h2>A. Dropout ‚Äî –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–π—Ä–æ–Ω–æ–≤ –Ω–∞—É–≥–∞–¥ üôà</h2>
    <p>–ù–∞ –≤—Ö–æ–¥–µ —É –Ω–∞—Å 5 –Ω–µ–π—Ä–æ–Ω–æ–≤ —Å –≤—ã—Ö–æ–¥–∞–º–∏ (—Å–∏–≥–Ω–∞–ª–∞–º–∏):</p>
    <table id="dropout-inputs">
      <tr><th>–ù–µ–π—Ä–æ–Ω</th><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td></tr>
      <tr><th>–í—ã—Ö–æ–¥</th><td id="out0">0.20</td><td id="out1">0.50</td><td id="out2">0.80</td><td id="out3">0.30</td><td id="out4">0.60</td></tr>
    </table>
    <div class="row">
      <label>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å Dropout (p): <input type="number" id="dropout-p" value="0.4" min="0" max="1" step="0.1"></label>
      <button id="apply-dropout">–ü—Ä–∏–º–µ–Ω–∏—Ç—å Dropout</button>
      <button id="reset-dropout">–°–±—Ä–æ—Å–∏—Ç—å</button>
    </div>
    <div id="info-dropout">–ù–∞–∂–º–∏ ¬´–ü—Ä–∏–º–µ–Ω–∏—Ç—å Dropout¬ª, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫–∏–µ –Ω–µ–π—Ä–æ–Ω—ã –æ—Ç–∫–ª—é—á–∏–ª–∏—Å—å –∏ –∫–∞–∫ –º—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è.</div>
  </section>

  <section id="batchnorm-section">
    <h2>B. BatchNorm ‚Äî –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ üßπ</h2>
    <p>–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –ø–æ—Å–ª–µ —Å–ª–æ—è –º—ã –ø–æ–ª—É—á–∏–ª–∏ 6 –∑–Ω–∞—á–µ–Ω–∏–π (–ø—Ä–µ–¥-–∞–∫—Ç–∏–≤–∞—Ü–∏–∏):</p>
    <table id="bn-inputs">
      <tr><th>–ù–µ–π—Ä–æ–Ω</th><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr>
      <tr><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
        <td id="bn0">1.0</td><td id="bn1">2.0</td><td id="bn2">3.0</td>
        <td id="bn3">4.0</td><td id="bn4">5.0</td><td id="bn5">6.0</td>
      </tr>
    </table>
    <div class="row">
      <button id="compute-bn">–í—ã—á–∏—Å–ª–∏—Ç—å BatchNorm</button>
      <button id="reset-bn">–°–±—Ä–æ—Å–∏—Ç—å</button>
    </div>
    <div id="info-bn">–ù–∞–∂–º–∏ ¬´–í—ã—á–∏—Å–ª–∏—Ç—å BatchNorm¬ª, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å—Ä–µ–¥–Ω–µ–µ, –¥–∏—Å–ø–µ—Ä—Å–∏—é –∏ –Ω–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.</div>
  </section>

  <section id="reg-section">
    <h2>C. L1 –∏ L2 —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è ‚Äî —à—Ç—Ä–∞—Ñ –∑–∞ –±–æ–ª—å—à–∏–µ –≤–µ—Å–∞ üìè</h2>
    <p>–£ –Ω–∞—Å –µ—Å—Ç—å 5 –≤–µ—Å–æ–≤:</p>
    <div class="row">
      <label>–í–µ—Å w1: <input type="number" id="w0" value="0.5" step="0.1"></label>
      <label>–í–µ—Å w2: <input type="number" id="w1" value="-1.2" step="0.1"></label>
      <label>–í–µ—Å w3: <input type="number" id="w2" value="2.0" step="0.1"></label>
      <label>–í–µ—Å w4: <input type="number" id="w3" value="-0.7" step="0.1"></label>
      <label>–í–µ—Å w5: <input type="number" id="w4" value="1.5" step="0.1"></label>
    </div>
    <div class="row">
      <label>–ü–∞—Ä–∞–º–µ—Ç—Ä Œª: <input type="number" id="lambda" value="0.1" step="0.01"></label>
      <button id="compute-reg">–í—ã—á–∏—Å–ª–∏—Ç—å —à—Ç—Ä–∞—Ñ—ã</button>
      <button id="reset-reg">–°–±—Ä–æ—Å–∏—Ç—å</button>
    </div>
    <div id="info-reg">–ù–∞–∂–º–∏ ¬´–í—ã—á–∏—Å–ª–∏—Ç—å —à—Ç—Ä–∞—Ñ—ã¬ª, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å L1 –∏ L2 —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—é.</div>
  </section>

  <script>
    // === Dropout ===
    const baseOut = [0.2,0.5,0.8,0.3,0.6];
    let currentMask = [];
    document.getElementById('apply-dropout').onclick = ()=>{
      const p = parseFloat(document.getElementById('dropout-p').value);
      const keepProb = 1 - p;
      currentMask = baseOut.map(_=> Math.random() < keepProb ? 1 : 0 );
      // apply mask and scale
      let info = `p = ${p}\nkeepProb = 1 - p = ${keepProb}\n\n`;
      info += `–ù–µ–π—Ä–æ–Ω—ã –∏ –º–∞—Å–∫–∞:\n`;
      baseOut.forEach((v,i)=>{
        info += `  –ù–µ–π—Ä–æ–Ω ${i+1}: out=${v.toFixed(2)}  mask=${currentMask[i]}\n`;
      });
      info += `\n–ü–æ—Å–ª–µ Dropout (–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è / keepProb):\n`;
      baseOut.forEach((v,i)=>{
        const newV = currentMask[i] ? v/keepProb : 0;
        info += `  –ù–µ–π—Ä–æ–Ω ${i+1}: ${(newV).toFixed(2)}\n`;
        document.getElementById('out'+i).textContent = newV.toFixed(2);
      });
      document.getElementById('info-dropout').textContent = info;
    };
    document.getElementById('reset-dropout').onclick = ()=>{
      baseOut.forEach((v,i)=> document.getElementById('out'+i).textContent = v.toFixed(2));
      document.getElementById('info-dropout').textContent = '–ù–∞–∂–º–∏ ¬´–ü—Ä–∏–º–µ–Ω–∏—Ç—å Dropout¬ª, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫–∏–µ –Ω–µ–π—Ä–æ–Ω—ã –æ—Ç–∫–ª—é—á–∏–ª–∏—Å—å –∏ –∫–∞–∫ –º—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è.';
    };

    // === BatchNorm ===
    const bnVals = [1,2,3,4,5,6];
    document.getElementById('compute-bn').onclick = ()=>{
      const eps = 1e-5;
      const mean = bnVals.reduce((a,b)=>a+b,0)/bnVals.length;
      const variance = bnVals.reduce((a,b)=>a+(b-mean)**2,0)/bnVals.length;
      const info = 
        `Mean = (1+2+3+4+5+6)/6 = ${mean.toFixed(2)}\n` +
        `Var = sum((x-mean)¬≤)/6 = ${variance.toFixed(2)}\n\n` +
        `–ù–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (x - mean)/‚àö(var+Œµ):\n` +
        bnVals.map((v,i)=> `  N${i+1}: (${v}-${mean.toFixed(2)})/‚àö(${variance.toFixed(2)}+Œµ) = ${(((v-mean)/Math.sqrt(variance+eps)).toFixed(4))}`).join('\n');
      bnVals.forEach((v,i)=> document.getElementById('bn'+i).textContent = v.toFixed(2));
      document.getElementById('info-bn').textContent = info;
    };
    document.getElementById('reset-bn').onclick = ()=>{
      bnVals.forEach((v,i)=> document.getElementById('bn'+i).textContent = v.toFixed(2));
      document.getElementById('info-bn').textContent = '–ù–∞–∂–º–∏ ¬´–í—ã—á–∏—Å–ª–∏—Ç—å BatchNorm¬ª, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å—Ä–µ–¥–Ω–µ–µ, –¥–∏—Å–ø–µ—Ä—Å–∏—é –∏ –Ω–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.';
    };

    // === L1/L2 Regularization ===
    document.getElementById('compute-reg').onclick = ()=>{
      const ws = [0,1,2,3,4].map(i=>parseFloat(document.getElementById('w'+i).value));
      const Œª = parseFloat(document.getElementById('lambda').value);
      const sumAbs = ws.reduce((a,b)=>a+Math.abs(b),0);
      const sumSq  = ws.reduce((a,b)=>a+b*b,0);
      const L1 = Œª * sumAbs;
      const L2 = Œª * sumSq;
      let info = 
        `–í–µ—Å–∞: [${ws.map(w=>w.toFixed(2)).join(', ')}]\n` +
        `Œª = ${Œª}\n\n` +
        `L1: Œª¬∑‚àë|w| = ${Œª}¬∑${sumAbs.toFixed(2)} = ${L1.toFixed(4)}\n` +
        `L2: Œª¬∑‚àëw¬≤ = ${Œª}¬∑${sumSq.toFixed(2)} = ${L2.toFixed(4)}\n`;
      document.getElementById('info-reg').textContent = info;
    };
    document.getElementById('reset-reg').onclick = ()=>{
      document.getElementById('info-reg').textContent = '–ù–∞–∂–º–∏ ¬´–í—ã—á–∏—Å–ª–∏—Ç—å —à—Ç—Ä–∞—Ñ—ã¬ª, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å L1 –∏ L2 —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—é.';
    };
  </script>

</body>
</html>
