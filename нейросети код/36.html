<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ì–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏ ¬´–¥–ª—è –¥—É—Ä–∞—á–∫–æ–≤¬ª</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 20px auto;
      padding: 0 15px;
      line-height: 1.4;
    }
    h1, h2 { text-align: center; }
    section { border: 1px solid #ccc; padding: 15px; border-radius: 6px; margin-bottom: 30px; }
    .controls {
      text-align: center;
      margin: 10px 0;
    }
    .controls button {
      margin: 4px;
      padding: 6px 12px;
      font-size: 1rem;
    }
    canvas {
      display: block;
      margin: 0 auto 10px;
      background: #fff;
      border: 1px solid #888;
    }
    #logGAN, #logVAE, #logDiff {
      background: #f5f5f5;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-family: monospace;
      white-space: pre-line;
      max-height: 200px;
      overflow-y: auto;
      margin-top: 10px;
    }
    .row {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
    }
    .col {
      flex: 1 1 45%;
      text-align: center;
    }
  </style>
</head>
<body>

  <h1>–ì–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏ ¬´–¥–ª—è –¥—É—Ä–∞—á–∫–æ–≤¬ª</h1>
  <p style="text-align:center;">üé®ü§ñüìö‚ú® ‚Äî –æ–±—É—á–∞–µ–º –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö, –∞ –ø–æ—Ç–æ–º —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–µ!</p>

  <!-- GAN Section -->
  <section>
    <h2>1. GAN (–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä vs –î–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ç–æ—Ä)</h2>
    <div class="row">
      <div class="col">
        <strong>Real Images</strong>
        <canvas id="ganReal" width="150" height="150"></canvas>
      </div>
      <div class="col">
        <strong>Generated</strong>
        <canvas id="ganFake" width="150" height="150"></canvas>
      </div>
    </div>
    <div class="controls">
      <button id="ganTrain">Train GAN Step</button>
      <button id="ganGen">Generate Image</button>
      <button id="ganReset">Reset GAN</button>
    </div>
    <div id="logGAN">–ñ—É—Ä–Ω–∞–ª GAN: –∂–º–∏ ¬´Train GAN Step¬ª.</div>
  </section>

  <!-- VAE Section -->
  <section>
    <h2>2. VAE (Encoder ‚Üí Latent ‚Üí Decoder)</h2>
    <div class="controls">
      <button id="vaeEncode">Encode</button>
      <button id="vaeDecode" disabled>Decode</button>
      <button id="vaeReset">Reset VAE</button>
    </div>
    <div id="logVAE">–ñ—É—Ä–Ω–∞–ª VAE: Encode ‚Üí –ø–æ–ª—É—á–∞–µ–º mean –∏ var, –∑–∞—Ç–µ–º Decode.</div>
  </section>

  <!-- Diffusion Section -->
  <section>
    <h2>3. Diffusion Model (–®—É–º ‚Üí –û–±—Ä–∞–∑)</h2>
    <canvas id="diffCanvas" width="300" height="300"></canvas>
    <div class="controls">
      <button id="diffStep1">Step 1: –ù–∞—á–∞–ª–æ —Å —à—É–º–∞</button>
      <button id="diffStep2" disabled>Step 2: –ù–µ–º–Ω–æ–≥–æ –æ—á–∏—Å—Ç–∏–ª–∏</button>
      <button id="diffStep3" disabled>Step 3: –§–∏–Ω–∞–ª</button>
      <button id="diffReset">Reset Diffusion</button>
    </div>
    <div id="logDiff">–ñ—É—Ä–Ω–∞–ª Diffusion: —à–∞–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –∫–∞–∫ —à—É–º –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –æ–±—Ä–∞–∑.</div>
  </section>

<script>
  // ===== GAN Demo =====
  const ganReal = document.getElementById('ganReal').getContext('2d'),
        ganFake = document.getElementById('ganFake').getContext('2d'),
        logGAN = document.getElementById('logGAN');
  let genQual=0.2, discAcc=0.8, ganStep=0;
  function drawGAN(){
    // Real: –∑–µ–ª—ë–Ω—ã–π –∫–≤–∞–¥—Ä–∞—Ç
    ganReal.fillStyle='#4caf50';
    ganReal.fillRect(10,10,130,130);
    // Fake: —Ü–≤–µ—Ç –æ—Ç –∫—Ä–∞—Å–Ω–æ–≥–æ(genQual small) –∫ –∑–µ–ª—ë–Ω–æ–º—É(genQual large)
    const r = Math.floor(255*(1-genQual)),
          g = Math.floor(255*genQual);
    ganFake.fillStyle=`rgb(${r},${g},0)`;
    ganFake.fillRect(10,10,130,130);
  }
  function logG(msg){
    logGAN.textContent = msg + '\n\n' + logGAN.textContent;
  }
  document.getElementById('ganTrain').onclick = ()=>{
    ganStep++;
    // —Å–∏–º—É–ª–∏—Ä—É–µ–º –æ–±—É—á–µ–Ω–∏–µ
    genQual = Math.min(1, genQual + 0.1);
    discAcc = Math.max(0, discAcc - 0.05);
    drawGAN();
    logG(`–®–∞–≥ ${ganStep}: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–∞—á–µ—Å—Ç–≤–æ = ${genQual.toFixed(2)}, `+
         `–î–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ç–æ—Ä —Ç–æ—á–Ω–æ—Å—Ç—å = ${discAcc.toFixed(2)}`);
    document.getElementById('ganGen').disabled = false;
  };
  document.getElementById('ganGen').onclick = ()=>{
    drawGAN();
    logG(`Generate: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∞—Ä–∏—Å–æ–≤–∞–ª –Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ `+
         `(—Ü–≤–µ—Ç-–∑–µ–ª—ë–Ω—ã–π‚Üí—Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å, –∫—Ä–∞—Å–Ω—ã–π‚Üí—Ñ–µ–π–∫, mix=${genQual.toFixed(2)})`);
  };
  document.getElementById('ganReset').onclick = ()=>{
    genQual=0.2; discAcc=0.8; ganStep=0;
    drawGAN();
    logGAN.textContent = '–ñ—É—Ä–Ω–∞–ª GAN: –∂–º–∏ ¬´Train GAN Step¬ª.';
    document.getElementById('ganGen').disabled = true;
  };
  // –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  ganReset.onclick = document.getElementById('ganReset').onclick;
  drawGAN();

  // ===== VAE Demo =====
  const logVAE = document.getElementById('logVAE');
  let latentMean=0, latentVar=1, encoded=false;
  function logV(msg){
    logVAE.textContent = msg + '\n\n' + logVAE.textContent;
  }
  document.getElementById('vaeEncode').onclick = ()=>{
    // –≤–æ–∑—å–º—ë–º –ø—Ä–æ—Å—Ç–æ–π –≤—Ö–æ–¥ x=2.5
    const x = 2.5;
    latentMean = x * 0.6;            // dummy mean
    latentVar  = Math.abs(x - 1.0); // dummy var
    encoded = true;
    logV(`Encode:\n  x = ${x}\n  mean = x¬∑0.6 = ${latentMean.toFixed(2)}\n  var = |x‚àí1.0| = ${latentVar.toFixed(2)}`);
    document.getElementById('vaeDecode').disabled = false;
  };
  document.getElementById('vaeDecode').onclick = ()=>{
    if(!encoded) return;
    // sample z ~ N(mean,var)
    const z = latentMean + Math.sqrt(latentVar)* (Math.random()*2-1);
    const xRec = z * 1.2; // dummy decode
    logV(`Decode:\n  sample z = mean ¬±‚àövar¬∑eps = ${z.toFixed(2)}\n  recon x\' = z¬∑1.2 = ${xRec.toFixed(2)}`);
  };
  document.getElementById('vaeReset').onclick = ()=>{
    latentMean=0; latentVar=1; encoded=false;
    logVAE.textContent = '–ñ—É—Ä–Ω–∞–ª VAE: Encode ‚Üí –ø–æ–ª—É—á–∞–µ–º mean –∏ var, –∑–∞—Ç–µ–º Decode.';
    document.getElementById('vaeDecode').disabled = true;
  };
  document.getElementById('vaeReset').onclick();

  // ===== Diffusion Demo =====
  const diffCanvas = document.getElementById('diffCanvas'),
        ctxD = diffCanvas.getContext('2d'),
        logDiff = document.getElementById('logDiff');
  let diffStep = 0;
  function drawNoise(){
    const img = ctxD.createImageData(300,300);
    for(let i=0;i<img.data.length;i+=4){
      const v = Math.random()*255;
      img.data[i]=img.data[i+1]=img.data[i+2]=v;
      img.data[i+3]=255;
    }
    ctxD.putImageData(img,0,0);
  }
  function drawShape(alpha=1){
    ctxD.globalAlpha = alpha;
    ctxD.fillStyle = '#ffeb3b';
    ctxD.beginPath();
    ctxD.arc(150,150,80,0,2*Math.PI);
    ctxD.fill();
    ctxD.globalAlpha = 1;
  }
  function logDiffusion(msg){
    logDiff.textContent = msg + '\n\n' + logDiff.textContent;
  }
  document.getElementById('diffStep1').onclick = ()=>{
    diffStep=1;
    drawNoise();
    logDiffusion('Step 1: –ù–∞—á–∞–ª—å–Ω—ã–π —à—É–º (–±–µ–ª—ã–π —à—É–º).');
    document.getElementById('diffStep2').disabled = false;
  };
  document.getElementById('diffStep2').onclick = ()=>{
    diffStep=2;
    drawNoise();
    drawShape(0.4);
    logDiffusion('Step 2: –î–æ–±–∞–≤–∏–ª–∏ 40% –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ (–ø–æ–ª—É—Ç–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—Ä—É–≥).');
    document.getElementById('diffStep3').disabled = false;
  };
  document.getElementById('diffStep3').onclick = ()=>{
    diffStep=3;
    drawShape(1);
    logDiffusion('Step 3: –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏–ª–∏ —à—É–º, –ø–æ–ª—É—á–∏–ª—Å—è —è—Ä–∫–∏–π –∫—Ä—É–≥ üîµ.');
  };
  document.getElementById('diffReset').onclick = ()=>{
    diffStep=0;
    ctxD.clearRect(0,0,300,300);
    logDiff.textContent = '–ñ—É—Ä–Ω–∞–ª Diffusion: —à–∞–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –∫–∞–∫ —à—É–º –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –æ–±—Ä–∞–∑.';
    document.getElementById('diffStep2').disabled = true;
    document.getElementById('diffStep3').disabled = true;
  };
  document.getElementById('diffReset').onclick();
</script>

</body>
</html>
